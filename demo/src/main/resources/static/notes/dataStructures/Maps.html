<!DOCTYPE html>
<html lang="en">


<head>
    <meta name="viewport" charset="UTF-8" content="width=device-width, initial-scale=1">
    <title>Javascript Maps</title>
    <style>
        body {
            background-color: rgb(58, 58, 58);
            color: seashell;
            font-family: 'Courier New', Courier, monospace;
            margin-left: 10%;
            margin-right: 10%;
        }
        h1 {
            text-align: center;
            font-family: 'Courier New', Courier, monospace;
        }
        h3 {
            text-align: center;
            font-family: 'Courier New', Courier, monospace;
            padding: 0;
            margin: 0;
        }
        div.gridContainer {
            display:grid;
            grid-column-gap: 10px;
            grid-row-gap: 10px;
            padding: 5px;
            grid-template-columns: auto auto auto;
            border-color: rgb(255, 255, 255);
            border-style: solid;
        }

        div.gridConsole {
            text-align: center;
            grid-column-start: 3;
            grid-column-end: 4;
            grid-row-start: 1;
            /* grid-row-end: 9; */
            border-color: rgb(0, 0, 0);
            border-style: dashed;
            min-width:350px;
        }

        div.gridRowMerged {
            text-align: center;
            grid-column-start: 1;
            grid-column-end: 3;
            border-color: rgb(0, 0, 0);
            border-style: dashed;
        }

        div.gridLeftCol {
            grid-column-start:1;
            grid-column-end: 2;
            border-color: rgb(0, 0, 0);
            border-style: dashed;
        }

        div.gridRightCol {
            display:inline;
            grid-column-start:2;
            grid-column-end: 3;
            border-color: black;
            border-style: dashed;
        }
    </style>
</head>

<body>
    <h1>Javascript Maps</h2>
    <div class="gridContainer">
        <!-- Console -->
        <div class="gridConsole">
            <h3>Console</h3>
            <textarea cols="40" rows="22" maxlength="5000" placeholder="{}" readonly></textarea>
            <br>
            <button onclick="printMapOfMaps()">Show map</button>
        </div>

        <!-- Construction -->
        <div class="gridRowMerged">
            <h3>Create a Map</h3>
        </div>
        <!-- new Map() -->
        <div class="gridLeftCol">
            <p>
                <pre>let map = new Map();</pre>
                <br>
                <pre>// new Map(newMapParam), where each inner arrays match '[key,pair]' layout</pre>
                <pre>let map = new Map([</pre>
                <pre>        ["apple", 10],</pre>
                <pre>        ["orange", 30],</pre>
                <pre>        ["banana", 20]</pre>
                <pre>    ]);</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <button>Create</button>
            <br>
        </div>

        <!-- Add pairs -->
        <div class="gridRowMerged">
            <h3>Add key-value pairs from Map</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Add pairs</pre>
                <pre>map.set('1', 'str');</pre>
                <pre>map.set(1, 'num');</pre>
                <pre>map.set(true, 'bool');</pre>
                <br>
                <pre>// Chaining</pre>
                <pre>// Every map.set call returns the map itself</pre>
                <pre>map = map.set('key1', "val1");</pre>
                <pre>// So we can “chain” the calls:</pre>
                <pre>map.set('1', 'str1')</pre>
                <pre>   .set(1, 'num1')</pre>
                <pre>   .set(true, 'bool1');</pre>
                
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <input type="text" placeholder="Enter a key"><br>
            <input type="text" placeholder="Enter a value"><br>
            <button>Set</button><br>
        </div>

        <!-- Remove pairs -->
        <div class="gridRowMerged">
            <h3>Remove key-value pairs from Map</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Remove pairs</pre>
                <pre>map.delete('1');</pre>
                <pre>map.delete(1);</pre>
                <pre>map.delete(true);</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <input type="text" placeholder="Enter a key"><br>
            <button>Delete</button>
        </div>

        <!-- Get pairs -->
        <div class="gridRowMerged">
            <h3>Get a value by providing key from Map</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Return value in a Map</pre>
                <pre>map.get('1');       // 'str'</pre>
                <pre>map.get(1);         // 'num'</pre>
                <pre>map.get(true);      // 'bool'</pre>
                <pre>map.get('aLife');   // undefined</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <input type="text" placeholder="Enter a key"><br>
            <button>Get</button>
        </div>

        <!-- Check if key exists -->
        <div class="gridRowMerged">
            <h3>Check if key exists</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Looks for key</pre>
                <pre>// If exists, else true/false</pre>
                <pre>map.has('1');</pre>
                <pre>map.has(1);</pre>
                <pre>map.has(true);</pre>
                <pre>map.has('humor');  // false</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <input type="text" placeholder="Enter a key"><br>
            <button>Has</button>
        </div>

        <!-- Clear - delete all pairs -->
        <div class="gridRowMerged">
            <h3>Clear all pairs</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Clear all pairings in map</pre>
                <pre>map.clear();</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <button>Clear</button>
        </div>

        <!-- Size -->
        <div class="gridRowMerged">
            <h3>Get size (number) of Map</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Clear all pairings in map</pre>
                <pre>let num = map.size;    // Note: no ()</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <button>Size</button>
        </div>

        <!-- Iterate or Loop over a Map -->
        <div class="gridRowMerged">
            <h3>Iterate over a Map</h3>
            <p>Iterator follows the same order as Pair Insertion (FIFO)</p>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Pre ES6:</pre>
                <pre>for (var m in map){</pre>
                <pre>    for (var i=0; i &lt map[m].length; i++){ </pre>
                <pre>        map[m][i];</pre>
                <pre>    }</pre>
                <pre>}</pre>
                <pre>* Note ^ this did NOT work for </pre>
                <pre>Google Chrome v87 in 2021</pre>
                <br>
                <pre>// For ES6 (ES 2015):</pre>
                <pre>for (let eachKey of map.keys()) {</pre>
                <pre>    console.log(eachKey);</pre>
                <pre>}</pre>
                <pre>for (let eachVal of map.values()) {</pre>
                <pre>    console.log(eachVal);</pre>
                <pre>}</pre>
                <br>
                <pre>for (const [key, value] of myMap.entries()) {</pre>
                <pre>    console.log(key, value);</pre>
                <pre>}</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <button>Iterate</button>
        </div>

        <!-- Comparing Map to Object -->
        <div class="gridRowMerged">
            <h3>Comparing Map to Object</h3>
            <p>Map functionality on the LEFT, Object's on the RIGHT</p>
            
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Set new pairs with Map</pre>
                <pre>let newStudent = new Map();</pre>
                <pre>newStudent.set('name', 'Bob');</pre>
                <pre>newStudent.set('age', 20);</pre>
                <pre>newStudent.set('hobbies', ['reading', 'games']);</pre>
            </p>
            <hr>
            <p>
                <pre>// Map size, number of pairs</pre>
                <pre>let sizeNum = newStudent.size;      // 3</pre>
            </p>
            <hr>
            <p>
                <pre>// Convert Object to Map</pre>
                <pre>let obj = {</pre>
                <pre>   name: "John",       // 'name' being entry (key)</pre>
                <pre>   age: 30</pre>       // '30' being entry (value)
                <pre>};</pre>
                <br>
                <pre>let map = new Map(Object.entries(obj));</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <p>
                <pre>// Set new pairs with Object</pre>
                <pre>let newStudent  = {};</pre>
                <pre>newStudent.name = 'Bob';    // String</pre>
                <pre>newStudent.age  = 20;       // Num</pre>
                <pre>newStudent.hobbies = ['reading', 'games'];</pre>
                <br>
                <pre>OR</pre>
                <br>
                <pre>let newStudent = {</pre>
                <pre>    name: 'Bob',</pre>
                <pre>    age: 20,</pre>
                <pre>    hobbies: ['reading', 'games'],</pre>
                <pre>};</pre>
            </p>
            <hr>            
            <p>
                <pre>// Object size</pre>
                <pre>let arrOfKeys = Object.keys(newStudent);    // ['name', 'age', 'hobbies']</pre>
                <pre>let sizeNum = arrOfKeys.length;             // 3</pre>
                <br>
                <pre>OR</pre>
                <br>
                <pre>let sizeNum = Object.keys(newStudent).length;</pre>
            </p>
            <hr>
            <p>
                <pre>// Convert Map to Object</pre>
                <textarea cols="40" rows="7" maxlength="5000" readonly>let map = new Map();
map.set('banana', 1);
map.set('orange', 2);
map.set('meat', 4);
let obj = Object.fromEntries(map.entries());
                </textarea>
            </p>
        </div>
    </div>


    




    WIP
    WIP
    WIP
    WIP
    WIP
    WIP

    // Map can do more than Object.
                
                Using objects as keys is one of the most notable and important Map features.
                The same can't be done with Object - We can’t use another Object as a key in Object. .
                let john = { name: "John" };
                let ben = { name: "Ben" };

let visitsCountObj = {}; // try to use an object

visitsCountObj[ben] = 234; // try to use ben object as the key
visitsCountObj[john] = 123; // try to use john object as the key, ben object will get replaced
    
WIP
WIP
WIP
WIP



    <script>
        /**
         * Global Var
        **/
        var mapOfMaps               = new Map();
        // var mapOfObjs               = new Map();
        var allGridRightColButtons  = document.querySelectorAll(".gridRightCol button");
        let allGridRowMerged        = document.querySelectorAll(".gridRowMerged");
        let allGridLeftCol          = document.querySelectorAll(".gridLeftCol");
        let allGridRightCol         = document.querySelectorAll(".gridRightCol");
        let gridConsole             = document.querySelector(".gridConsole");       // note this is the div, not the textarea
        
        /**
         * On Load
         **/
        window.addEventListener("load",function() {
            // Create a new map for easy demo-ing
            mapOfMaps.set(
                "map1", 
                new Map([
                    ["key1", "val1"], 
                    ["key2", "val2"], 
                    ["key3", "val3"]
                ])
            );
            // Set style grid-row-end to number of div.gridRowMerged
            gridConsole.style.gridRowEnd = allGridRowMerged.length+1;
            // Add onclicks to all .gridRightCol buttons
            allGridRightColButtons.forEach(eachButton => {
                eachButton.addEventListener(
                    "click", 
                    function() {
                        btnsOnClick(event)
                    }
                );
            });
            // Add onclicks to all headers to hide/show
            allGridRowMerged.forEach(eachMerged => {
                eachMerged.addEventListener(
                    "click",
                    function() {
                        gridRowMergedOnClick(eachMerged);
                    }
                )
            });
            // Hide/Fold all content
            hideAll(allGridLeftCol);
            hideAll(allGridRightCol);
            // Print Current mapOfMaps
            printMapOfMaps();
        });
        
        /**
         * Controller
         **/
        function gridRowMergedOnClick(thisMerged) {
            // Already hidden, Show
            if(thisMerged.nextElementSibling.style.display == "none") {
                // revert all
                hideAll(allGridLeftCol);
                hideAll(allGridRightCol);
                revertAllBorderColors(allGridRowMerged);                                // turns previous white to black
                // show this
                thisMerged.nextElementSibling.style.display = '';                       // leftCol
                thisMerged.nextElementSibling.nextElementSibling.style.display = '';    // rightCol
                // inverse
                inverseColor(thisMerged);                                               // turns white
                // adjust console gridEnd to prevVal + 1
                gridConsole.style.gridRowEnd = allGridRowMerged.length+2;
            } 
            // Hide this
            else {
                thisMerged.nextElementSibling.style.display = 'none';                       // leftCol
                thisMerged.nextElementSibling.nextElementSibling.style.display = 'none';    // rightCol
                // inverse
                inverseColor(thisMerged);
                // adjust console gridEnd to prevVal - 1
                gridConsole.style.gridRowEnd = allGridRowMerged.length+1;
            }
        }

        function btnsOnClick(event) {
            // console.log(event.path);
            let btnText = event.path[0].innerText;
            let mapName = "";
            let map = new Map();
            let key     = "";
            let value   = "";
            let inputs  = event.path[1].querySelectorAll("input");
            switch (btnText) {
                case "Create":
                    console.log("Clicked 'Create'");
                    mapName         = inputs[0].value;
                    mapOfMaps.set(mapName, new Map());
                    printMapOfMaps();
                    break;
                case "Set":
                    console.log("Clicked 'Set'");
                    mapName = inputs[0].value;
                    key     = inputs[1].value;
                    value   = inputs[2].value;
                    try {
                        map = mapOfMaps.get(mapName);
                        map.set(key, value);
                    } catch (error) {
                        alert(error);
                        console.log(error);
                    }
                    printMapOfMaps();
                    break;
                case "Delete":
                    console.log("Clicked 'Delete'");
                    mapName = inputs[0].value;
                    key     = inputs[1].value;
                    try {
                        map = mapOfMaps.get(mapName);
                        map.delete(key);
                    } catch (error) {
                        alert(error);
                        console.log(error);
                    }
                    printMapOfMaps();
                    break;
                case "Get":
                    console.log("Clicked 'Get'");
                    mapName = inputs[0].value;
                    key     = inputs[1].value;
                    try {
                        map = mapOfMaps.get(mapName);
                        value = map.get(key);
                    } catch (error) {
                        alert(error);
                        console.log(error);
                    }
                    gridConsole.querySelector("textarea").value = value;
                    break;
                case "Has":
                    console.log("Clicked 'Has'");
                    mapName = inputs[0].value;
                    key     = inputs[1].value;
                    try {
                        map = mapOfMaps.get(mapName);
                        value = map.has(key);               // typeOf = boolean
                    } catch (error) {
                        alert(error);
                        console.log(error);
                    }
                    gridConsole.querySelector("textarea").value = value;
                    break;
                case "Clear":
                    console.log("Clicked 'Has'");
                    mapName = inputs[0].value;
                    try {
                        map = mapOfMaps.get(mapName);
                        map.clear();
                    } catch (error) {
                        alert(error);
                        console.log(error);
                    }
                    printMapOfMaps();
                    break;
                case "Size":
                    console.log("Clicked 'Size'");
                    mapName = inputs[0].value;
                    try {
                        map = mapOfMaps.get(mapName);
                        value = map.size;                       // typeOf = num
                    } catch (error) {
                        alert(error);
                        console.log(error);
                    }
                    gridConsole.querySelector("textarea").value = value;
                    break;
                case "Iterate":
                    console.log("Clicked 'Iterate'");
                    mapName = inputs[0].value;
                    let textArea = "";
                    let count = 0;
                    try {
                        map = mapOfMaps.get(mapName);
                        textArea = "Keys: "
                        for (let eachKey of map.keys()) {           // can change to "for (let eachKey of map.values()) {"
                            textArea = textArea + eachKey + ", ";
                            count++;
                        }
                        textArea = textArea + "\r\nValues: "
                        for (const [key, value] of map.entries()) {
                            // console.log(key, value);
                            textArea = textArea + value + ", ";
                        }
                        textArea = textArea + "\r\nTotal Pairs = " + count;
                    } catch (error) {
                        alert(error);
                        console.log(error);
                    }
                    gridConsole.querySelector("textarea").value = textArea;
                    break;
                default:
                    alert("btnsOnClick(event) switch case error");
                    break;
            }
        }

        /**
         * Methods
         **/
        function printMapOfMaps() {
            if(mapOfMaps.size==0) {
                document.querySelector("textarea").value = "{}";
            } else {
                let str = "{\r\n";
                let counter = 0;
                mapOfMaps.forEach( (value, key, map) => {
                    str = str
                        + "  ["+ key + " : \r\n"
                        + returnMapAsString(value)
                        +"  ]";
                    counter++;
                    if(counter < (map.size)) {
                        str = str + ",\r\n"
                    } else {
                        str = str + "\r\n"
                    }
                });
                str = str + "}";
                gridConsole.querySelector("textarea").value = str;
            }
            
        }

        // function printMapOfObjs() {
        //     if(mapOfObjs.size==0) {
        //         document.querySelector("textarea").value = "{}";
        //     } else {
        //         let str = "[\r\n";
        //         let counter = 0;
        //         mapOfObjs.forEach( (value, key, obj) => {
        //             str = str
        //                 + "  ["+ key + " : \r\n"
        //                 + returnObjAsString(obj)
        //                 +"  ]";
        //             counter++;
        //             if(counter < (Object.keys(obj).length)) {
        //                 str = str + ",\r\n"
        //             } else {
        //                 str = str + "\r\n"
        //             }
        //         });
        //         str = str + "]";
        //         gridConsole.querySelector("textarea").value = str;
        //     }
        // }

        // function returnObjAsString(obj) {
        //     let objArr = Object.keys(obj);

        //     if(objArr.length==0) {
        //         return "    []\r\n";
        //     }
        //     let str             = "    [\r\n";
        //     let counter         = 0;
        //     for (let i = 0; i < objArr.length; i++) {
        //         const eachPair  = array[i];
        //         let key         = eachPair[0];
        //         let val         = eachPair[1];
        //         str             = str + "      ["+ key + " : "+value+"]";
        //         counter++;
        //         if(counter < (map.size)) {
        //             str         = str + ",\r\n"
        //         } else {
        //             str         = str + "\r\n"
        //         }
        //     }
        //     str = str + "    }\r\n";
        //     return str;
        // }

        function returnMapAsString(map) {
            if(map.size==0) {
                return "    {}\r\n";
            }
            let str = "    {\r\n";
            let counter = 0;
            map.forEach( (value, key, map) => {
                str = str + "      ["+ key + " : "+value+"]";
                counter++;
                if(counter < (map.size)) {
                    str = str + ",\r\n"
                } else {
                    str = str + "\r\n"
                }
            });
            str = str + "    }\r\n";
            return str;
        }

        function hideAll(arr) {
            // Hide all left/rightCol
            arr.forEach(each => {
                each.style.display = 'none';
            });
        }

        function revertAllBorderColors(arr) {
            arr.forEach(each => {
                if(each.style.borderColor == "white") {
                    each.style.borderColor = "black";
                }
            });
        }

        function inverseColor(element) {
            if(element.style.borderColor == "white") {
                element.style.borderColor = "black";
            } else {
                element.style.borderColor = "white";
            }
        }

    </script>
</body>


</html>