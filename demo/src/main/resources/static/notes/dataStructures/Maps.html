<!DOCTYPE html>
<html lang="en">


<head>
    <meta name="viewport" charset="UTF-8" content="width=device-width, initial-scale=1">
    <title>Javascript Maps</title>
    <style>
        body {
            background-color: rgb(9, 28, 80);
            color: seashell;
            font-family: 'Courier New', Courier, monospace;
            margin-left: 15%;
            margin-right: 15%;
        }
        h1 {
            text-align: center;
        }
        div.gridContainer {
            display:grid;
            grid-column-gap: 10px;
            grid-row-gap: 10px;
            padding: 5px;
            grid-template-columns: auto auto;
            border-color: black;
            border-style: solid;
        }

        div.gridRowMerged {
            grid-column-start: 1;
            grid-column-end: 3;
            border-color: black;
            border-style: dashed;
        }

        div.gridLeftCol {
            grid-column-start:1;
            grid-column-end: 2;
            border-color: black;
            border-style: dashed;
        }

        div.gridRightCol {
            grid-column-start:2;
            grid-column-end: 3;
            border-color: black;
            border-style: dashed;
        }
    </style>
</head>

<body>
    <h1>Javascript Maps</h2>
    <div class="gridContainer">
        <!-- Console -->
        <div class="gridRowMerged">
            <h3>Console</h3>
            <textarea cols="70" rows="15" maxlength="5000" placeholder="{}" readonly></textarea>
        </div>

        <!-- Construction -->
        <div class="gridRowMerged">
            <h3>Create a Map</h3>
        </div>
        <!-- new Map() -->
        <div class="gridLeftCol">
            <p>
                <pre>
                let map = new Map();
                </pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name">
            <button>Create</button>
            <br>
        </div>

        <!-- Add & Remove pairs -->
        <div class="gridRowMerged">
            <h3>Add/Remove key-value pairs from Map</h3>
        </div>
        <!-- Add -->
        <div class="gridLeftCol">
            <p>
                <pre>
                // Add pairs
                map.set('1', 'str');
                map.set(1, 'num');
                map.set(true, 'bool');

                // Chaining
                // Every map.set call returns the map itself, so we can “chain” the calls:
                
                map.set('1', 'str1')
                   .set(1, 'num1')
                   .set(true, 'bool1');
                </pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Which">
            <input type="text" placeholder="Enter a key">
            <input type="text" placeholder="Enter a value">
            <button>Set</button>
            <br>
        </div>
        <!-- Remove -->
        <div class="gridLeftCol">
            <p>
                <pre>
                // Remove pairs
                map.delete('1');
                map.delete(1);
                map.delete(true);
                </pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Which">
            <input type="text" placeholder="Enter a key">
            <button>Delete</button>
            <br>
        </div>

        <!-- Get pairs -->
        <div class="gridRowMerged">
            <h3>Get a value by providing key from Map</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>
                // Return value in a Map
                map.get('1');       // 'str'
                map.get(1);         // 'num'
                map.get(true);      // 'bool'
                map.get('aLife');   // ??
                </pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name">
            <button>Get</button>
            <br>
        </div>

        <!-- Check if key exists -->
        <div class="gridRowMerged">
            <h3>Check if key exists</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>
                // Looks for key
                // If exists, else true/false
                map.has('1');
                map.has(1);
                map.has(true);
                map.has('humor');  // false
                </pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name">
            <button>Has</button>
            <br>
        </div>

        <!-- Clear - delete all pairs -->
        <div class="gridRowMerged">
            <h3>Clear all pairs</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>
                // Clear all pairings in map
                map.clear();
                </pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name">
            <button>Clear</button>
            <br>
        </div>

        <!-- Size -->
        <div class="gridRowMerged">
            <h3>Get size (number) of Map</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>
                // Clear all pairings in map
                let num = map.size;    // Note: no ()
                </pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name">
            <button>Size</button>
            <br>
        </div>
    </div>

    
    String as a key in Object is fine, but we can’t use another Object as a key in Object.
    Using objects as keys is one of the most notable and important Map features. The same can't be done with Object.

    let john = { name: "John" };
let ben = { name: "Ben" };

let visitsCountObj = {}; // try to use an object

visitsCountObj[ben] = 234; // try to use ben object as the key
visitsCountObj[john] = 123; // try to use john object as the key, ben object will get replaced



    <script>
        /**
         * Global Var
        **/
        var mapOfMaps = new Map();
        var allButtons = document.querySelectorAll("button");
        
        /**
         * On Load
         **/
        window.addEventListener("load",function() {
            allButtons.forEach(eachButton => {
                eachButton.addEventListener(
                    "click", 
                    function() {
                        btnsOnClick(event)
                    }
                );
            });
        });
        
        /**
         * Controller
         **/
        function btnsOnClick(event) {
            // console.log(event.path);
            let btnText = event.path[0].innerText;
            let mapName = "";
            let key     = "";
            let value   = "";
            switch (btnText) {
                case "Create":
                    console.log("Clicked 'Create'");
                    mapName = event.path[1].children[0].value;
                    addMap(mapName);
                    printMap(mapOfMaps);
                    break;
                case "Set":
                    console.log("Clicked 'Set'");
                    mapName = event.path[1].children[0].value;
                    key     = event.path[1].children[1].value;
                    value   = event.path[1].children[2].value;
                    setPair(mapName, key, value);
                    printMap(mapOfMaps);
                    break;
                case "Delete":
                    console.log("Clicked 'Delete'");
                    mapName = event.path[1].children[0].value;
                    key     = event.path[1].children[1].value;
                    deletePair(mapName, key)
                    printMap(mapOfMaps);
                    break;
                case "Get":
                    console.log("Clicked 'Get'");
                    
                    printMap(mapOfMaps);
                    break;
                default:
                    alert("btnsOnClick(event) switch case error");
                    break;
            }
        }

        /**
         * Methods
         **/
        function printMap(map) {
            if(map.size==0) {
                document.querySelector("textarea").value = "{}";
            } else {
                let str = "{\r\n";
                let counter = 0;
                map.forEach( (value, key, map) => {
                    str = str
                        + "  ["+ key + " : \r\n"
                        + returnMapAsString(value)
                        +"  ]";
                    counter++;
                    if(counter < (map.size)) {
                        str = str + ",\r\n"
                    } else {
                        str = str + "\r\n"
                    }
                });
                str = str + "}";
                document.querySelector("textarea").value = str;
            }
            
        }

        function returnMapAsString(map) {
            if(map.size==0) {
                return "    {}\r\n";
            }
            let str = "    {\r\n";
            let counter = 0;
            map.forEach( (value, key, map) => {
                str = str + "      ["+ key + " : "+value+"]";
                counter++;
                if(counter < (map.size)) {
                    str = str + ",\r\n"
                } else {
                    str = str + "\r\n"
                }
            });
            str = str + "    }\r\n";
            return str;
        }

        function addMap(mapName) {
            mapOfMaps.set(mapName, new Map());
        }
        
        function setPair(mapName, key, value) {
            let map = mapOfMaps.get(mapName);
            map.set(key, value);
        }

        function deletePair(mapName, key) {
            let map = mapOfMaps.get(mapName);
            map.delete(key);
        }

    </script>
</body>


</html>