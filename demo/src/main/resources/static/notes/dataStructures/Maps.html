<!DOCTYPE html>
<html lang="en">


<head>
    <meta name="viewport" charset="UTF-8" content="width=device-width, initial-scale=1">
    <title>Javascript Maps</title>
    <style>
        body {
            background-color: rgb(9, 28, 80);
            color: seashell;
            font-family: 'Courier New', Courier, monospace;
            /* margin-left: 15%; */
            /* margin-right: 15%; */
        }
        h1 {
            text-align: center;
        }
        div.gridContainer {
            display:grid;
            grid-column-gap: 10px;
            grid-row-gap: 10px;
            padding: 5px;
            grid-template-columns: auto auto auto;
            /* grid-template-areas:
                'header header header header header header'
                'menu main main main right right'
                'menu footer footer footer footer footer'; */
            border-color: black;
            border-style: solid;
        }

        div.gridConsole {
            text-align: center;
            grid-column-start: 3;
            grid-column-end: 4;
            grid-row-start: 1;
            grid-row-end: 17;
            border-color: black;
            border-style: dashed;
        }

        div.gridRowMerged {
            text-align: center;
            grid-column-start: 1;
            grid-column-end: 3;
            border-color: black;
            border-style: dashed;
        }

        div.gridLeftCol {
            grid-column-start:1;
            grid-column-end: 2;
            border-color: black;
            border-style: dashed;
        }

        div.gridRightCol {
            grid-column-start:2;
            grid-column-end: 3;
            border-color: black;
            border-style: dashed;
        }
    </style>
</head>

<body>
    <h1>Javascript Maps</h2>
    <div class="gridContainer">
        <!-- Console -->
        <div class="gridConsole">
            <h3>Console</h3>
            <textarea cols="70" rows="15" maxlength="5000" placeholder="{}" readonly></textarea>
        </div>

        <!-- Construction -->
        <div class="gridRowMerged">
            <h3>Create a Map</h3>
        </div>
        <!-- new Map() -->
        <div class="gridLeftCol">
            <p>
                <pre>let map = new Map();</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name">
            <button>Create</button>
            <br>
        </div>

        <!-- Add & Remove pairs -->
        <div class="gridRowMerged">
            <h3>Add/Remove key-value pairs from Map</h3>
        </div>
        <!-- Add -->
        <div class="gridLeftCol">
            <p>
                <pre>// Add pairs</pre>
                <pre>map.set('1', 'str');</pre>
                <pre>map.set(1, 'num');</pre>
                <pre>map.set(true, 'bool');</pre>
                <br>
                <pre>// Chaining</pre>
                <pre>// Every map.set call returns the map itself</pre>
                <pre>map = map.set('key1', "val1");</pre>
                <pre>// So we can “chain” the calls:</pre>
                <pre>map.set('1', 'str1')</pre>
                <pre>   .set(1, 'num1')</pre>
                <pre>   .set(true, 'bool1');</pre>
                
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <input type="text" placeholder="Enter a key"><br>
            <input type="text" placeholder="Enter a value"><br>
            <button>Set</button><br>
        </div>
        <!-- Remove -->
        <div class="gridLeftCol">
            <p>
                <pre>// Remove pairs</pre>
                <pre>map.delete('1');</pre>
                <pre>map.delete(1);</pre>
                <pre>map.delete(true);</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <input type="text" placeholder="Enter a key"><br>
            <button>Delete</button><br>
        </div>

        <!-- Get pairs -->
        <div class="gridRowMerged">
            <h3>Get a value by providing key from Map</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Return value in a Map</pre>
                <pre>map.get('1');       // 'str'</pre>
                <pre>map.get(1);         // 'num'</pre>
                <pre>map.get(true);      // 'bool'</pre>
                <pre>map.get('aLife');   // undefined</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <input type="text" placeholder="Enter a key"><br>
            <button>Get</button><br>
        </div>

        <!-- Check if key exists -->
        <div class="gridRowMerged">
            <h3>Check if key exists</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Looks for key</pre>
                <pre>// If exists, else true/false</pre>
                <pre>map.has('1');</pre>
                <pre>map.has(1);</pre>
                <pre>map.has(true);</pre>
                <pre>map.has('humor');  // false</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <input type="text" placeholder="Enter a key"><br>
            <button>Has</button><br>
        </div>









        <!-- Clear - delete all pairs -->
        <div class="gridRowMerged">
            <h3>Clear all pairs</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Clear all pairings in map</pre>
                <pre>map.clear();</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <button>Clear</button><br>
        </div>

        <!-- Size -->
        <div class="gridRowMerged">
            <h3>Get size (number) of Map</h3>
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Clear all pairings in map</pre>
                <pre>let num = map.size;    // Note: no ()</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <input type="text" placeholder="Enter a map name"><br>
            <button>Size</button><br>
        </div>




        <!-- Comparing Map to Object -->
        <div class="gridRowMerged">
            <h3>Comparing Map to Object</h3>
            <p>Map functionality on the LEFT, Object's on the RIGHT</p>
            
        </div>
        <div class="gridLeftCol">
            <p>
                <pre>// Set new pairs with Map</pre>
                <pre>let newStudent = new Map();</pre>
                <pre>newStudent.set('name', 'Bob');</pre>
                <pre>newStudent.set('age', 20);</pre>
                <pre>newStudent.set('hobbies', ['reading', 'games']);</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <p>
                <pre>// Set new pairs with Object</pre>
                <pre>let newStudent  = {};</pre>
                <pre>newStudent.name = 'Bob';    // String</pre>
                <pre>newStudent.age  = 20;       // Num</pre>
                <pre>newStudent.hobbies = ['reading', 'games'];</pre>
                <br>
                <pre>OR</pre>
                <br>
                <pre>let newStudent = {</pre>
                <pre>    name: 'Bob',</pre>
                <pre>    age: 20,</pre>
                <pre>    hobbies: ['reading', 'games'],</pre>
                <pre>};</pre>
            </p>>
        </div>

        <div class="gridLeftCol">
            <p>
                <pre>// Map size, number of pairs</pre>
                <pre>let sizeNum = newStudent.size;      // 3</pre>
            </p>
        </div>
        <div class="gridRightCol">
            <p>
                <pre>// Object size</pre>
                <pre>let arrOfKeys = Object.keys(newStudent);    // ['name', 'age', 'hobbies']</pre>
                <pre>let sizeNum = arrOfKeys.length;             // 3</pre>
                <br>
                <pre>OR</pre>
                <br>
                <pre>let sizeNum = Object.keys(newStudent).length;</pre>
            </p>
        </div>
    </div>


    




    WIP
    WIP
    WIP
    WIP
    WIP
    WIP

    // Map can do more than Object.
                
                Using objects as keys is one of the most notable and important Map features.
                The same can't be done with Object - We can’t use another Object as a key in Object. .
                let john = { name: "John" };
                let ben = { name: "Ben" };

let visitsCountObj = {}; // try to use an object

visitsCountObj[ben] = 234; // try to use ben object as the key
visitsCountObj[john] = 123; // try to use john object as the key, ben object will get replaced
    
WIP
WIP
WIP
WIP



    <script>
        /**
         * Global Var
        **/
        var mapOfMaps = new Map();
        var allButtons = document.querySelectorAll("button");
        let allGridRowMerged = document.querySelectorAll(".gridRowMerged");
        console.log(allGridRowMerged);

        /**
         * On Load
         **/
        window.addEventListener("load",function() {
            // Add onclicks to all buttons
            allButtons.forEach(eachButton => {
                eachButton.addEventListener(
                    "click", 
                    function() {
                        btnsOnClick(event)
                    }
                );
            });
            // Hide all left/rightCol
            allGridRowMerged.forEach(eachMerged => {
                eachMerged.nextElementSibling.style.display = 'none';
                eachMerged.nextElementSibling.nextElementSibling.style.display = 'none';
            });
            // Add onclicks to all headers to hide/show
            allGridRowMerged.forEach(eachMerged => {
                eachMerged.addEventListener(
                    "click",
                    function() {
                        console.log(eachMerged.nextElementSibling);                     // leftCol
                        console.log(eachMerged.nextElementSibling.nextElementSibling);  // rightCol
                        eachMerged.nextElementSibling.style.display = 'grid';
                        eachMerged.nextElementSibling.nextElementSibling.style.display = 'grid';
                    }
                )
            });
        });
        
        /**
         * Controller
         **/
        function btnsOnClick(event) {
            // console.log(event.path);
            let btnText = event.path[0].innerText;
            let mapName = "";
            let map = new Map();
            let key     = "";
            let value   = "";
            switch (btnText) {
                case "Create":
                    console.log("Clicked 'Create'");
                    mapName = event.path[1].children[0].value;
                    mapOfMaps.set(mapName, new Map());
                    printMapOfMaps();
                    break;
                case "Set":
                    console.log("Clicked 'Set'");
                    mapName = event.path[1].children[0].value;
                    key     = event.path[1].children[1].value;
                    value   = event.path[1].children[2].value;
                    map = mapOfMaps.get(mapName);
                    map.set(key, value);
                    printMapOfMaps();
                    break;
                case "Delete":
                    console.log("Clicked 'Delete'");
                    mapName = event.path[1].children[0].value;
                    key     = event.path[1].children[1].value;
                    map = mapOfMaps.get(mapName);
                    map.delete(key);
                    printMapOfMaps();
                    break;
                case "Get":
                    console.log("Clicked 'Get'");
                    mapName = event.path[1].children[0].value;
                    key     = event.path[1].children[1].value;
                    map = mapOfMaps.get(mapName);
                    value = map.get(key);
                    document.querySelector("textarea").value = value;
                    break;
                case "Has":
                    console.log("Clicked 'Has'");
                    mapName = event.path[1].children[0].value;
                    key     = event.path[1].children[1].value;
                    map = mapOfMaps.get(mapName);
                    let bool = map.has(key);
                    document.querySelector("textarea").value = bool;
                    break;
                case "Clear":
                    console.log("Clicked 'Has'");
                    mapName = event.path[1].children[0].value;
                    map = mapOfMaps.get(mapName);
                    map.clear();
                    printMapOfMaps();
                    break;
                case "Size":
                    console.log("Clicked 'Size'");
                    mapName = event.path[1].children[0].value;
                    map = mapOfMaps.get(mapName);
                    let num = map.size;
                    document.querySelector("textarea").value = num;
                    break;
                default:
                    alert("btnsOnClick(event) switch case error");
                    break;
            }
        }

        /**
         * Methods
         **/
        function printMapOfMaps() {
            if(mapOfMaps.size==0) {
                document.querySelector("textarea").value = "{}";
            } else {
                let str = "{\r\n";
                let counter = 0;
                mapOfMaps.forEach( (value, key, map) => {
                    str = str
                        + "  ["+ key + " : \r\n"
                        + returnMapAsString(value)
                        +"  ]";
                    counter++;
                    if(counter < (map.size)) {
                        str = str + ",\r\n"
                    } else {
                        str = str + "\r\n"
                    }
                });
                str = str + "}";
                document.querySelector("textarea").value = str;
            }
            
        }

        function returnMapAsString(map) {
            if(map.size==0) {
                return "    {}\r\n";
            }
            let str = "    {\r\n";
            let counter = 0;
            map.forEach( (value, key, map) => {
                str = str + "      ["+ key + " : "+value+"]";
                counter++;
                if(counter < (map.size)) {
                    str = str + ",\r\n"
                } else {
                    str = str + "\r\n"
                }
            });
            str = str + "    }\r\n";
            return str;
        }


    </script>
</body>


</html>